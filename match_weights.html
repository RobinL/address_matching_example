<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "discreteHeight": 60, "discreteWidth": 400}, "header": {"title": null}, "mark": {"tooltip": null}, "title": {"anchor": "middle"}}, "vconcat": [{"mark": {"type": "bar", "clip": true, "height": 15}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "probability_two_random_records_match", "format": ".4f", "title": "Probability two random records match", "type": "nominal"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Equivalent match weight", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"domain": false, "gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "labels": false, "ticks": false, "title": ""}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": "Prior (starting) match weight", "titleAlign": "right", "titleAngle": 0, "titleFontWeight": "normal"}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": 20, "transform": [{"filter": "(datum.comparison_name == 'probability_two_random_records_match')"}]}, {"mark": {"type": "bar", "clip": true}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "row": {"field": "comparison_name", "header": {"labelAlign": "left", "labelAnchor": "middle", "labelAngle": 0}, "sort": {"field": "comparison_sort_order"}, "type": "nominal"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "m_probability", "format": ".4f", "title": "M probability", "type": "quantitative"}, {"field": "u_probability", "format": ".4f", "title": "U probability", "type": "quantitative"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "title": "Comparison level match weight = log2(m/u)"}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": {"step": 12}, "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "transform": [{"filter": "(datum.comparison_name != 'probability_two_random_records_match')"}]}], "data": {"name": "data-77f4e9665671fc50dd51cfa2a1c5247d"}, "params": [{"name": "mouse_zoom", "select": {"type": "interval", "encodings": ["x"]}, "bind": "scales", "views": []}], "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "title": {"text": "Model parameters (components of final match weight)", "subtitle": "Use mousewheel to zoom"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-77f4e9665671fc50dd51cfa2a1c5247d": [{"comparison_name": "probability_two_random_records_match", "sql_condition": null, "label_for_charts": "", "m_probability": null, "u_probability": null, "m_probability_description": null, "u_probability_description": null, "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": null, "is_null_level": false, "bayes_factor": 0.010101010101010102, "log2_bayes_factor": -6.6293566200796095, "comparison_vector_value": 0, "max_comparison_vector_value": 0, "bayes_factor_description": "The probability that two random records drawn at random match is 0.010 or one in  100.0 records.This is equivalent to a starting match weight of -6.629.", "probability_two_random_records_match": 0.01, "comparison_sort_order": -1}, {"comparison_name": "numeric_token_1", "sql_condition": "\"numeric_token_1_l\" = \"numeric_token_1_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.01475833131606552, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 1.48% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_1", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 64.37042099507927, "log2_bayes_factor": 6.008325999272145, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 64.37 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_1", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_1_r\"", "label_for_charts": "Exact match inverted numbers", "m_probability": 0.025000000000000022, "u_probability": 0.00046094569515048816, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match inverted numbers comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.05% of records are in the exact match inverted numbers comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_1", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 54.23632385120355, "log2_bayes_factor": 5.761187490519208, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match inverted numbers` then comparison is 54.24 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_1", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.001, "u_probability": 1.0, "m_probability_description": "Amongst matching record comparisons, 0.10% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 100.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.001, "log2_bayes_factor": -9.965784284662087, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  1,000.00 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_2", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_2_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.020370370370370372, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 2.04% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_2", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 46.63636363636363, "log2_bayes_factor": 5.543383396969757, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 46.64 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_2", "sql_condition": "\"numeric_token_1_l\" = \"numeric_token_2_r\"", "label_for_charts": "Exact match inverted numbers", "m_probability": 0.025000000000000022, "u_probability": 0.010052910052910053, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match inverted numbers comparison level", "u_probability_description": "Amongst non-matching record comparisons, 1.01% of records are in the exact match inverted numbers comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_2", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 2.48684210526316, "log2_bayes_factor": 1.3143149107774885, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match inverted numbers` then comparison is 2.49 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_2", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.025000000000000022, "u_probability": 0.9695767195767195, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 96.96% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.025784447476125537, "log2_bayes_factor": -5.2773550588001, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  38.78 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_3", "sql_condition": "\"numeric_token_3_l\" = \"numeric_token_3_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.000927734375, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.09% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_3", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1024.0, "log2_bayes_factor": 10.0, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 1,024.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "numeric_token_3", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_3_r\"", "label_for_charts": "Exact match 2", "m_probability": 0.025000000000000022, "u_probability": 0.0031250000000000028, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match 2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.31% of records are in the exact match 2 comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_3", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 8.0, "log2_bayes_factor": 3.0, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match 2` then comparison is 8.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "numeric_token_3", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.025000000000000022, "u_probability": 0.8000000000000007, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 80.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.03125, "log2_bayes_factor": -5.0, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  32.00 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1e-10", "label_for_charts": "6. <1e-10", "m_probability": 0.95, "u_probability": 2.8241749374646977e-05, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the <1e-10 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the <1e-10 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 33638.142857142855, "log2_bayes_factor": 15.037810436963257, "comparison_vector_value": 6, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-10` then comparison is 33,638.14 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1e-8", "label_for_charts": "5. <1e-8", "m_probability": 0.00833333333333334, "u_probability": 3.429355281207133e-05, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-8 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the <1e-8 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 243.0000000000002, "log2_bayes_factor": 7.924812503605782, "comparison_vector_value": 5, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-8` then comparison is 243.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1e-6", "label_for_charts": "4. <1e-6", "m_probability": 0.00833333333333334, "u_probability": 0.00013313967562333576, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-6 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.01% of records are in the <1e-6 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 62.590909090909136, "log2_bayes_factor": 5.967881225497668, "comparison_vector_value": 4, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-6` then comparison is 62.59 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1e-4", "label_for_charts": "3. <1e-4", "m_probability": 0.00833333333333334, "u_probability": 0.001003590736706205, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-4 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.10% of records are in the <1e-4 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 8.303517587939705, "log2_bayes_factor": 3.0537226294251103, "comparison_vector_value": 3, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-4` then comparison is 8.30 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1e-2", "label_for_charts": "2. <1e-2", "m_probability": 0.00833333333333334, "u_probability": 0.0022472363430969095, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.22% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 3.708258527827651, "log2_bayes_factor": 1.8907418275160897, "comparison_vector_value": 2, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is 3.71 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            array_filter(\n                token_relative_frequency_arr_l,\n                y -> array_contains(\n                    array_intersect(\n                        list_transform(token_relative_frequency_arr_l, x -> x.token),\n                        list_transform(token_relative_frequency_arr_r, x -> x.token)\n                    ),\n                    y.token\n                )\n            ),\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p * q\n)\n*\nlist_reduce(\n    list_prepend(\n        1.0,\n        list_transform(\n            list_concat(\n                array_filter(\n                    token_relative_frequency_arr_l,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_r, x -> x.token),\n                                y.token\n                            )\n                ),\n                array_filter(\n                    token_relative_frequency_arr_r,\n                        y -> not array_contains(\n                                list_transform(token_relative_frequency_arr_l, x -> x.token),\n                                y.token\n                            )\n                )\n            ),\n\n            x -> x.relative_frequency\n        )\n    ),\n    (p, q) -> p / q^0.25\n)\n < 1", "label_for_charts": "1. <1e-2", "m_probability": 0.00833333333333334, "u_probability": 0.006446179294763173, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.64% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.2927554373337515, "log2_bayes_factor": 0.37044937281429524, "comparison_vector_value": 1, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is 1.29 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_relative_frequency_arr", "sql_condition": "ELSE", "label_for_charts": "0. All other comparisons", "m_probability": 0.00833333333333334, "u_probability": 0.9901073186476237, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 99.01% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.008416596035989054, "log2_bayes_factor": -6.892547409438088, "comparison_vector_value": 0, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  118.81 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "common_tokens", "sql_condition": "2*len(list_intersect(\"common_tokens_l\", \"common_tokens_r\")) - len(list_distinct(list_concat(\"common_tokens_l\", \"common_tokens_r\"))) > 0", "label_for_charts": "More matching tokens than non matching", "m_probability": 0.95, "u_probability": 0.08203421286209957, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the more matching tokens than non matching comparison level", "u_probability_description": "Amongst non-matching record comparisons, 8.20% of records are in the more matching tokens than non matching comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 11.58053410711651, "log2_bayes_factor": 3.5336298884492807, "comparison_vector_value": 1, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `more matching tokens than non matching` then comparison is 11.58 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 4}, {"comparison_name": "common_tokens", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.050000000000000044, "u_probability": 0.9179657871379004, "m_probability_description": "Amongst matching record comparisons, 5.00% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 91.80% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.05446826090969428, "log2_bayes_factor": -4.1984403849612155, "comparison_vector_value": 0, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  18.36 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 4}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>