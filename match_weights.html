<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "discreteHeight": 60, "discreteWidth": 400}, "header": {"title": null}, "mark": {"tooltip": null}, "title": {"anchor": "middle"}}, "vconcat": [{"mark": {"type": "bar", "clip": true, "height": 15}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "probability_two_random_records_match", "format": ".4f", "title": "Probability two random records match", "type": "nominal"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Equivalent match weight", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"domain": false, "gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "labels": false, "ticks": false, "title": ""}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": "Prior (starting) match weight", "titleAlign": "right", "titleAngle": 0, "titleFontWeight": "normal"}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": 20, "transform": [{"filter": "(datum.comparison_name == 'probability_two_random_records_match')"}]}, {"mark": {"type": "bar", "clip": true}, "encoding": {"color": {"field": "log2_bayes_factor", "scale": {"domain": [-10, 0, 10], "interpolate": "lab", "range": ["red", "#bbbbbb", "green"]}, "title": "Match weight", "type": "quantitative"}, "row": {"field": "comparison_name", "header": {"labelAlign": "left", "labelAnchor": "middle", "labelAngle": 0}, "sort": {"field": "comparison_sort_order"}, "type": "nominal"}, "tooltip": [{"field": "comparison_name", "title": "Comparison name", "type": "nominal"}, {"field": "label_for_charts", "title": "Label", "type": "ordinal"}, {"field": "sql_condition", "title": "SQL condition", "type": "nominal"}, {"field": "m_probability", "format": ".4f", "title": "M probability", "type": "quantitative"}, {"field": "u_probability", "format": ".4f", "title": "U probability", "type": "quantitative"}, {"field": "bayes_factor", "format": ",.4f", "title": "Bayes factor = m/u", "type": "quantitative"}, {"field": "log2_bayes_factor", "format": ",.4f", "title": "Match weight = log2(m/u)", "type": "quantitative"}, {"field": "bayes_factor_description", "title": "Match weight description", "type": "nominal"}], "x": {"axis": {"gridColor": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": "#aaa"}, "value": "#ddd"}, "gridDash": {"condition": {"test": "abs(datum.value / 10) == 1", "value": [3]}, "value": null}, "gridWidth": {"condition": {"test": "abs(datum.value / 10)  <= 1 & datum.value % 10 === 0", "value": 2}, "value": 1}, "title": "Comparison level match weight = log2(m/u)"}, "field": "log2_bayes_factor", "scale": {"domain": [-16, 16]}, "type": "quantitative"}, "y": {"axis": {"title": null}, "field": "label_for_charts", "sort": {"field": "comparison_vector_value", "order": "descending"}, "type": "nominal"}}, "height": {"step": 12}, "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "transform": [{"filter": "(datum.comparison_name != 'probability_two_random_records_match')"}]}], "data": {"name": "data-11e7a141cec968b57f00dd320f73bcab"}, "params": [{"name": "mouse_zoom", "select": {"type": "interval", "encodings": ["x"]}, "bind": "scales", "views": []}], "resolve": {"axis": {"y": "independent"}, "scale": {"y": "independent"}}, "title": {"text": "Model parameters (components of final match weight)", "subtitle": "Use mousewheel to zoom"}, "$schema": "https://vega.github.io/schema/vega-lite/v5.9.3.json", "datasets": {"data-11e7a141cec968b57f00dd320f73bcab": [{"comparison_name": "probability_two_random_records_match", "sql_condition": null, "label_for_charts": "", "m_probability": null, "u_probability": null, "m_probability_description": null, "u_probability_description": null, "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": null, "is_null_level": false, "bayes_factor": 0.010101010101010102, "log2_bayes_factor": -6.6293566200796095, "comparison_vector_value": 0, "max_comparison_vector_value": 0, "bayes_factor_description": "The probability that two random records drawn at random match is 0.010 or one in  100.0 records.This is equivalent to a starting match weight of -6.629.", "probability_two_random_records_match": 0.01, "comparison_sort_order": -1}, {"comparison_name": "numeric_token_1", "sql_condition": "\"numeric_token_1_l\" = \"numeric_token_1_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.005242320493603979, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.52% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_1", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 181.21745916890634, "log2_bayes_factor": 7.501578146499903, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 181.22 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_1", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_1_r\"", "label_for_charts": "Exact match inverted numbers", "m_probability": 0.025000000000000022, "u_probability": 0.00032839014049245514, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match inverted numbers comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.03% of records are in the exact match inverted numbers comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_1", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 76.12896039603967, "log2_bayes_factor": 6.250373472029231, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match inverted numbers` then comparison is 76.13 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_1", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.001, "u_probability": 1.0, "m_probability_description": "Amongst matching record comparisons, 0.10% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 100.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.001, "log2_bayes_factor": -9.965784284662087, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  1,000.00 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 0}, {"comparison_name": "numeric_token_2", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_2_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.009700176366843033, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.97% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_2", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 97.93636363636364, "log2_bayes_factor": 6.613772724861155, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 97.94 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_2", "sql_condition": "\"numeric_token_1_l\" = \"numeric_token_2_r\"", "label_for_charts": "Exact match inverted numbers", "m_probability": 0.025000000000000022, "u_probability": 0.010582010582010581, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match inverted numbers comparison level", "u_probability_description": "Amongst non-matching record comparisons, 1.06% of records are in the exact match inverted numbers comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_2", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 2.362500000000002, "log2_bayes_factor": 1.2403143293337116, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match inverted numbers` then comparison is 2.36 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_2", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.025000000000000022, "u_probability": 0.9797178130511464, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 97.97% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.02551755175517554, "log2_bayes_factor": -5.292366271334224, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  39.19 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 1}, {"comparison_name": "numeric_token_3", "sql_condition": "\"numeric_token_3_l\" = \"numeric_token_3_r\"", "label_for_charts": "Exact match", "m_probability": 0.95, "u_probability": 0.000927734375, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.09% of records are in the exact match comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_3", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1024.0, "log2_bayes_factor": 10.0, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match` then comparison is 1,024.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "numeric_token_3", "sql_condition": "\"numeric_token_2_l\" = \"numeric_token_3_r\"", "label_for_charts": "Exact match 2", "m_probability": 0.025000000000000022, "u_probability": 0.0031250000000000028, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the exact match 2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.31% of records are in the exact match 2 comparison level", "has_tf_adjustments": true, "tf_adjustment_column": "numeric_token_3", "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 8.0, "log2_bayes_factor": 3.0, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `exact match 2` then comparison is 8.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "numeric_token_3", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.025000000000000022, "u_probability": 0.8000000000000007, "m_probability_description": "Amongst matching record comparisons, 2.50% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 80.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.03125, "log2_bayes_factor": -5.0, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  32.00 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 2}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1e-10", "label_for_charts": "6. <1e-10", "m_probability": 0.95, "u_probability": 2.5119998231552124e-05, "m_probability_description": "Amongst matching record comparisons, 95.00% of records are in the <1e-10 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.00% of records are in the <1e-10 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 37818.474, "log2_bayes_factor": 15.206803530329223, "comparison_vector_value": 6, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-10` then comparison is 37,818.47 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1e-8", "label_for_charts": "5. <1e-8", "m_probability": 0.00833333333333334, "u_probability": 8.239359419949097e-05, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-8 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.01% of records are in the <1e-8 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 101.14054878048789, "log2_bayes_factor": 6.660217701321122, "comparison_vector_value": 5, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-8` then comparison is 101.14 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1e-6", "label_for_charts": "4. <1e-6", "m_probability": 0.00833333333333334, "u_probability": 0.0001818687871964374, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-6 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.02% of records are in the <1e-6 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 45.820580110497275, "log2_bayes_factor": 5.517923818856001, "comparison_vector_value": 4, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-6` then comparison is 45.82 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1e-4", "label_for_charts": "3. <1e-4", "m_probability": 0.00833333333333334, "u_probability": 0.0008490559402264618, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-4 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.08% of records are in the <1e-4 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 9.814822485207108, "log2_bayes_factor": 3.2949621747696596, "comparison_vector_value": 3, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-4` then comparison is 9.81 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1e-2", "label_for_charts": "2. <1e-2", "m_probability": 0.00833333333333334, "u_probability": 0.0029611453915353646, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.30% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 2.8142263318629137, "log2_bayes_factor": 1.4927383608152063, "comparison_vector_value": 2, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is 2.81 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    token_rel_freq_arr_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(token_rel_freq_arr_l, x -> x.tok),\n                            list_transform(token_rel_freq_arr_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     *  \n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                list_concat(\n                    array_filter(\n                        token_rel_freq_arr_l,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_r, x -> x.tok),\n                                    y.tok\n                                )\n                    ),\n                    array_filter(\n                        token_rel_freq_arr_r,\n                            y -> not array_contains(\n                                    list_transform(token_rel_freq_arr_l, x -> x.tok),\n                                    y.tok\n                                )\n                    )\n                ),\n\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p / q^0.33\n    )\n     < 1", "label_for_charts": "1. <1e-2", "m_probability": 0.00833333333333334, "u_probability": 0.008468453803820853, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 0.85% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.9840442572377796, "log2_bayes_factor": -0.023204892878099855, "comparison_vector_value": 1, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is  1.02 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "token_rel_freq_arr", "sql_condition": "ELSE", "label_for_charts": "0. All other comparisons", "m_probability": 0.00833333333333334, "u_probability": 0.9874319624847898, "m_probability_description": "Amongst matching record comparisons, 0.83% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 98.74% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.008439400029510088, "log2_bayes_factor": -6.8886438455894945, "comparison_vector_value": 0, "max_comparison_vector_value": 6, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  118.49 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 3}, {"comparison_name": "common_end_tokens", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    common_end_tokens_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(common_end_tokens_l, x -> x.tok),\n                            list_transform(common_end_tokens_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     < 1e-2", "label_for_charts": "2. <1e-2", "m_probability": 1.0, "u_probability": 0.2, "m_probability_description": "Amongst matching record comparisons, 100.00% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 20.00% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 5.0, "log2_bayes_factor": 2.321928094887362, "comparison_vector_value": 2, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is 5.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 4}, {"comparison_name": "common_end_tokens", "sql_condition": "\n    list_reduce(\n        list_prepend(\n            1.0,\n            list_transform(\n                array_filter(\n                    common_end_tokens_l,\n                    y -> array_contains(\n                        array_intersect(\n                            list_transform(common_end_tokens_l, x -> x.tok),\n                            list_transform(common_end_tokens_r, x -> x.tok)\n                        ),\n                        y.tok\n                    )\n                ),\n                x -> x.rel_freq\n            )\n        ),\n        (p, q) -> p * q\n    )\n     < 0.5", "label_for_charts": "1. <1e-2", "m_probability": 1.0, "u_probability": 0.5, "m_probability_description": "Amongst matching record comparisons, 100.00% of records are in the <1e-2 comparison level", "u_probability_description": "Amongst non-matching record comparisons, 50.00% of records are in the <1e-2 comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 2.0, "log2_bayes_factor": 1.0, "comparison_vector_value": 1, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `<1e-2` then comparison is 2.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 4}, {"comparison_name": "common_end_tokens", "sql_condition": "ELSE", "label_for_charts": "0. All other comparisons", "m_probability": 0.5, "u_probability": 1.0, "m_probability_description": "Amongst matching record comparisons, 50.00% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 100.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 0.5, "log2_bayes_factor": -1.0, "comparison_vector_value": 0, "max_comparison_vector_value": 2, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is  2.00 times less likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 4}, {"comparison_name": "original_address_concat", "sql_condition": "\"original_address_concat_l\" = \"original_address_concat_r\"", "label_for_charts": "Exact match", "m_probability": 0.5, "u_probability": 0.5, "m_probability_description": "Amongst matching record comparisons, 50.00% of records are in the exact match comparison level", "u_probability_description": "Amongst non-matching record comparisons, 50.00% of records are in the exact match comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.0, "log2_bayes_factor": 0.0, "comparison_vector_value": 1, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `exact match` then comparison is 1.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 5}, {"comparison_name": "original_address_concat", "sql_condition": "ELSE", "label_for_charts": "All other comparisons", "m_probability": 0.5, "u_probability": 0.5, "m_probability_description": "Amongst matching record comparisons, 50.00% of records are in the all other comparisons comparison level", "u_probability_description": "Amongst non-matching record comparisons, 50.00% of records are in the all other comparisons comparison level", "has_tf_adjustments": false, "tf_adjustment_column": null, "tf_adjustment_weight": 1.0, "is_null_level": false, "bayes_factor": 1.0, "log2_bayes_factor": 0.0, "comparison_vector_value": 0, "max_comparison_vector_value": 1, "bayes_factor_description": "If comparison level is `all other comparisons` then comparison is 1.00 times more likely to be a match", "probability_two_random_records_match": 0.01, "comparison_sort_order": 5}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>